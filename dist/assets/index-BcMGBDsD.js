import{p as de,q as me,t as se,v as pe,T as ue,r as l,C as re,w as G,x as ae,y as ge,z as he,A as fe,D as xe,E as ee,G as je,W as be,H as Ce,J as Se,_ as ye,F as S,j as t,b as ve,K as we,M as K,L as Pe,I as E,B as le,N as ne,c as L,s as te,d as z,u as Ie,O as De,Q as Te,R as $e,U as _e,V as Oe,X as Ne}from"./index-Cb_E7giR.js";import{h as B}from"./moment-BH_gi4k_.js";import{I as Me}from"./antd-img-crop.esm-CSzM3tWl.js";import{C as R,S as k,D as X}from"./index-gX2ISiGG.js";import{I as Ee}from"./index-BrYgfhRU.js";import{E as Ue}from"./EditOutlined-BlqpfEp8.js";import{T as oe}from"./Table-BWfrwmEE.js";import{U as Fe}from"./index-BQsW3lGh.js";import{S as ze}from"./index-gh4QcmWV.js";import"./index-VjVmanXD.js";import"./PlusOutlined-DmT80J4H.js";import"./addEventListener-BgwVifcY.js";import"./styleChecker-CdUbCfc4.js";import"./index-DvPUYAG9.js";import"./Pagination-CHtVKEwY.js";const Le=e=>{const{paddingXXS:r,lineWidth:o,tagPaddingHorizontal:s,componentCls:a,calc:g}=e,i=g(s).sub(o).equal(),y=g(r).sub(o).equal();return{[a]:Object.assign(Object.assign({},me(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:i,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${se(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${a}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${a}-close-icon`]:{marginInlineStart:y,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${a}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${a}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:i}}),[`${a}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},Q=e=>{const{lineWidth:r,fontSizeIcon:o,calc:s}=e,a=e.fontSizeSM;return pe(e,{tagFontSize:a,tagLineHeight:se(s(e.lineHeightSM).mul(a).equal()),tagIconSize:s(o).sub(s(r).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},J=e=>({defaultBg:new ue(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText}),ie=de("Tag",e=>{const r=Q(e);return Le(r)},J);var Ae=function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)r.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(o[s[a]]=e[s[a]]);return o};const Be=l.forwardRef((e,r)=>{const{prefixCls:o,style:s,className:a,checked:g,onChange:i,onClick:y}=e,x=Ae(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:D,tag:j}=l.useContext(re),v=c=>{i==null||i(!g),y==null||y(c)},w=D("tag",o),[T,O,b]=ie(w),n=G(w,`${w}-checkable`,{[`${w}-checkable-checked`]:g},j==null?void 0:j.className,a,O,b);return T(l.createElement("span",Object.assign({},x,{ref:r,style:Object.assign(Object.assign({},s),j==null?void 0:j.style),className:n,onClick:v})))}),ke=Be,He=e=>ge(e,(r,o)=>{let{textColor:s,lightBorderColor:a,lightColor:g,darkColor:i}=o;return{[`${e.componentCls}${e.componentCls}-${r}`]:{color:s,background:g,borderColor:a,"&-inverse":{color:e.colorTextLightSolid,background:i,borderColor:i},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}}),Re=ae(["Tag","preset"],e=>{const r=Q(e);return He(r)},J);function Ye(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const H=(e,r,o)=>{const s=Ye(o);return{[`${e.componentCls}${e.componentCls}-${r}`]:{color:e[`color${o}`],background:e[`color${s}Bg`],borderColor:e[`color${s}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}},qe=ae(["Tag","status"],e=>{const r=Q(e);return[H(r,"success","Success"),H(r,"processing","Info"),H(r,"error","Error"),H(r,"warning","Warning")]},J);var Ve=function(e,r){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)r.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(o[s[a]]=e[s[a]]);return o};const We=(e,r)=>{const{prefixCls:o,className:s,rootClassName:a,style:g,children:i,icon:y,color:x,onClose:D,bordered:j=!0,visible:v}=e,w=Ve(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:T,direction:O,tag:b}=l.useContext(re),[n,c]=l.useState(!0),u=he(w,["closeIcon","closable"]);l.useEffect(()=>{v!==void 0&&c(v)},[v]);const $=fe(x),N=Ce(x),P=$||N,M=Object.assign(Object.assign({backgroundColor:x&&!P?x:void 0},b==null?void 0:b.style),g),C=T("tag",o),[A,Y,q]=ie(C),V=G(C,b==null?void 0:b.className,{[`${C}-${x}`]:P,[`${C}-has-color`]:x&&!P,[`${C}-hidden`]:!n,[`${C}-rtl`]:O==="rtl",[`${C}-borderless`]:!j},s,a,Y,q),f=_=>{_.stopPropagation(),D==null||D(_),!_.defaultPrevented&&c(!1)},[,d]=xe(ee(e),ee(b),{closable:!1,closeIconRender:_=>{const F=l.createElement("span",{className:`${C}-close-icon`,onClick:f},_);return je(_,F,p=>({onClick:Z=>{var W;(W=p==null?void 0:p.onClick)===null||W===void 0||W.call(p,Z),f(Z)},className:G(p==null?void 0:p.className,`${C}-close-icon`)}))}}),m=typeof w.onClick=="function"||i&&i.type==="a",I=y||null,h=I?l.createElement(l.Fragment,null,I,i&&l.createElement("span",null,i)):i,U=l.createElement("span",Object.assign({},u,{ref:r,className:V,style:M}),h,d,$&&l.createElement(Re,{key:"preset",prefixCls:C}),N&&l.createElement(qe,{key:"status",prefixCls:C}));return A(m?l.createElement(be,{component:"Tag"},U):U)},ce=l.forwardRef(We);ce.CheckableTag=ke;const Xe=ce;var Ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"};const Ke=Ge;var Qe=function(r,o){return l.createElement(Se,ye({},r,{ref:o,icon:Ke}))},Je=l.forwardRef(Qe);const Ze=Je,{Meta:et}=R,tt=({index:e,handleClick:r,data:o,onInitialize:s})=>{const[a,g]=l.useState(!1),[i,y]=l.useState(!1),[x]=S.useForm(),[D,j]=l.useState(!1),[v,w]=l.useState({}),[T,O]=l.useState([]),[b,n]=l.useState([]),[c,u]=l.useState(!1),[$,N]=l.useState(!1),[P,M]=l.useState([]),C={onRemove:f=>{const d=P.indexOf(f),m=P.slice();m.splice(d,1),M(m)},beforeUpload:f=>(M([...P,f]),!1),fileList:P},A=[{title:"Field",dataIndex:"field",width:150},{title:"Deatils",dataIndex:"details",width:250,render:(f,d)=>t.jsx(ne,{style:{flexWrap:"wrap"},children:Array.isArray(d.details)?d.details.map(m=>(console.log(m),t.jsx(Xe,{color:"blue",style:{height:"40px",display:"flex",fontSize:"14px",textAlign:"center",alignItems:"center",flexWrap:"wrap",cursor:d.field==="Team Name"?"pointer":"default"},onClick:()=>{d.field==="Team Name"&&(V(m.TeamID),u(!1),N(!0))},children:m.StudentName}))):d.details})}],Y=f=>{console.log(f);let d={...v,...f};delete d.project_image,d.Other_Section===null&&delete d.Other_Section,d.projectcompletion_id===null&&delete d.projectcompletion_id;let m=[];d.Team_details.map(h=>{m.push(h.Team_ID)}),console.log(m),delete d.Team_details;const I=new FormData;Object.keys(d).forEach(h=>{I.append(h,d[h])}),P.forEach(h=>{I.append("project_image",h)}),m.map(h=>{I.append("Team_ID",h)}),y(!0),L.post(`staff/Update-Project/${v.ProjectID}/`,I).then(h=>{console.log(h),g(!1),s(),M([])}).catch(h=>{te.error("Failed to update Project! Please try again"),console.log(h)}).finally(()=>{y(!1)})},q=f=>{console.log("Failed:",f),te.error(f.errorFields[0].errors)};function V(f){j(!0),L.get(`${z.home.projects.TeamDetails}${f}/`).then(d=>{console.log(d);let m=d.data[0],I=[],h=[];m.students_details.map(p=>{I.push({StudentID:p.STUDID,StudentName:`${p.first_name} ${p.last_name}`})}),m.other_institute_members_details.map(p=>{h.push({StudentID:p.member_id,StudentName:`${p.first_name} ${p.last_name}`})});let U={"Team Name":m.TeamName,Mentor:m.Mentor,"Lead Student":I.filter(p=>p.StudentID===m.lead),Students:I,"External Students":h,"Team Created Date":B(m.DtCrte).format("MMMM Do YYYY"),"Last Updated":B(m.DtChd).format("MMMM Do YYYY")},_=Object.keys(U),F=[];_.map(p=>{F.push({field:p,details:U[p]})}),console.log(F),n(F)}).catch(d=>console.log(d)).finally(()=>{j(!1)})}return console.log(o),t.jsxs(t.Fragment,{children:[t.jsx(R,{className:"shadow-[rgba(50,_50,_105,_0.15)_0px_2px_5px_0px,_rgba(0,_0,_0,_0.05)_0px_1px_1px_0px]",style:{width:300},cover:t.jsx(Ee,{src:o.project_image===void 0?ve.pageWise.projects.projectImage:`${we}${o.project_image}`,style:{objectFit:"cover",width:"100%",height:"200px"}}),actions:[t.jsx(Ue,{onClick:()=>{M([]),w(o),g(!0),x.setFieldsValue({...o})},style:{fontSize:"16px"}},"Edit"),t.jsx(Ze,{style:{fontSize:"16px"},onClick:()=>{console.log(o),r(o)}},"Open")],children:t.jsx(et,{title:o==null?void 0:o.ProjectName,description:`${B(o==null?void 0:o.DtCrte).format("MMMM Do YYYY")} - ${B(o==null?void 0:o.project_deadline).format("MMMM Do YYYY")}`})}),t.jsx(K,{centered:!0,open:c,onOk:()=>{u(!1)},onCancel:()=>{u(!1)},width:600,footer:null,children:t.jsx(R,{title:`${v.ProjectName} Details`,style:{marginBottom:"1rem"},children:t.jsx(oe,{columns:A,dataSource:T,pagination:{pageSize:5}})})}),t.jsx(K,{centered:!0,open:$,onOk:()=>{N(!1),u(!0)},onCancel:()=>{N(!1),u(!0)},width:600,footer:null,children:t.jsx(R,{title:"Team Details",style:{marginBottom:"1rem"},children:t.jsx(oe,{loading:D,columns:A,dataSource:b,pagination:{pageSize:5}})})}),t.jsx(Pe,{title:"Edit Project",width:window.innerWidth>600?600:window.innerWidth-50,onClose:()=>{g(!1)},open:a,style:{zIndex:"1000"},children:t.jsxs(S,{form:x,onFinish:Y,onFinishFailed:q,layout:"vertical",children:[t.jsx(S.Item,{name:"Description",label:"Description",rules:[{required:!0,message:"Please enter Description!"}],children:t.jsx(E,{placeholder:"Enter Description"})}),t.jsx(S.Item,{name:"ProblemStatementent",label:"Problem Statementent",rules:[{required:!0,message:"Please enter Problem Statementent!"}],children:t.jsx(E,{placeholder:"Enter Problem Statementent"})}),t.jsx(S.Item,{name:"Aim",label:"Aim",rules:[{required:!0,message:"Please enter Aim!"}],children:t.jsx(E,{placeholder:"Enter Aim"})}),t.jsx(S.Item,{name:"Uniqueness",label:"Uniqueness",rules:[{required:!0,message:"Please enter Uniqueness!"}],children:t.jsx(E,{placeholder:"Enter Uniqueness"})}),t.jsx(S.Item,{name:"Hardware",label:"Hardware Used",rules:[{required:!0,message:"Please enter Hardware Used!"}],children:t.jsx(E,{placeholder:"Enter Hardware Name"})}),t.jsx(S.Item,{name:"Software",label:"Software Used",rules:[{required:!0,message:"Please enter Software Used!"}],children:t.jsx(E,{placeholder:"Enter Software Name"})}),t.jsxs("div",{style:{marginBottom:"1rem",width:"100%"},children:[t.jsx("div",{style:{margin:"1rem 0",fontSize:"1rem"},children:"Upload Thumbnail of the Project"}),t.jsx(Me,{rotationSlider:!0,aspect:16/9,children:t.jsx(Fe,{listType:"picture-card",fileList:P,...C,children:P.length<1&&"+ Upload"})})]}),t.jsx(S.Item,{children:t.jsx(le,{type:"primary",htmlType:"submit",loading:i,style:{width:"100%"},children:"Update Project Information"})})]})})]})},xt=()=>{const e=Ie(),[r,o]=l.useState(!1),[s,a]=l.useState(null),[g,i]=l.useState({projectList:!0,projectConfig:!1,projectConfigUpdate:!1}),[y,x]=l.useState([]),[D]=S.useForm();l.useEffect(()=>{T()},[]);const j=n=>{x(n)},v=()=>{o(!1)},w=()=>{o(!1)},T=()=>{i(n=>({...n,projectList:!0})),L.get(`${De()==="STUDENT"?z.home.projects.read:z.home.projects.readByMember}${Te()}/`).then(n=>{var u;j(n.data);let c=[];(u=n==null?void 0:n.data)==null||u.map($=>{c.push({value:$.ProjectID,label:$.ProjectName,initialprocessstatus:$.initialprocessstatus})}),$e(c)}).catch(n=>console.log(n)).finally(()=>{i(n=>({...n,projectList:!1}))})},O=n=>{i(c=>({...c,projectConfig:!0})),Oe(n.ProjectID),n.project_type!=null?n.initialprocessstatus?e("/dashboard/configuration"):e("/dashboard/project/initial-process"):(a(n),o(!0),L.get(`${z.home.projects.getConfiguration}${n.ProjectID}/`).then(c=>{console.log(c),D.setFieldsValue(c.data[0])}).catch(c=>console.log(c)).finally(()=>{i(c=>({...c,projectConfig:!1}))}))},b=n=>{let c=n;c.User=Ne(),i(u=>({...u,projectConfigUpdate:!0})),L.post(`${z.home.projects.configuration}${s.ProjectID}/`,c).then(u=>{(u.status===200||u.status===201)&&e("/dashboard/project/initial-process")}).catch(u=>console.log(u)).finally(()=>{i(u=>({...u,projectConfigUpdate:!1}))})};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"max-w-8xl mx-auto py-14 px-4 sm:px-6 lg:px-8",children:[t.jsxs("header",{className:"max-w-3xl",children:[t.jsx("p",{className:" text-sm font-semibold text-primary"}),t.jsx("h1",{className:"pt-4 block text-xl font-bold text-gray-800 sm:text-3xl",children:"All Projects"})]}),t.jsx("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",gap:"25px"},children:g.projectList?t.jsxs(t.Fragment,{children:[t.jsx(k.Node,{active:!0,children:t.jsx(X,{style:{fontSize:40,color:"#bfbfbf"}})})," ",t.jsx(k.Node,{active:!0,children:t.jsx(X,{style:{fontSize:40,color:"#bfbfbf"}})})," ",t.jsx(k.Node,{active:!0,children:t.jsx(X,{style:{fontSize:40,color:"#bfbfbf"}})})]}):y.map((n,c)=>t.jsx(tt,{index:c,data:n,handleClick:O,onInitialize:T},c))}),t.jsx(K,{title:r?s.ProjectName:"",open:r,onOk:v,onCancel:w,footer:!1,children:t.jsxs(ne,{direction:"vertical",className:"w-full",children:[t.jsx("p",{className:"font-thin text-2xl",children:"Fill some basic details"}),t.jsx(S,{form:D,layout:"vertical",onFinish:b,children:g.projectConfig?t.jsx(k,{}):t.jsxs(t.Fragment,{children:[t.jsx(S.Item,{label:"Project Type",name:"project_type",children:t.jsx(_e,{placeholder:"Select project type",size:"large",options:[{value:"Academic_Project",label:"Academic Project"},{value:"Prototype",label:"Prototype"},{value:"MVP",label:"MVP"},{value:"Go_to_Market",label:"Go to Market"}]})}),t.jsx(S.Item,{label:"Project have IOT Configuration?",name:"iot_configuration",children:t.jsx(ze,{size:"large"})}),t.jsx(le,{loading:g.projectConfigUpdate,className:"w-full",htmlType:"submit",size:"large",type:"primary",children:"Save"})]})})]})})]})})};export{xt as default};
